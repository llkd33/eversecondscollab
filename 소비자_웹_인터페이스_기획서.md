# 소비자 웹 인터페이스 기획서

## 🌐 개요

### 1.1 목적
중고 상품을 찾고 구매하려는 소비자를 위한 웹 기반 마켓플레이스 인터페이스 제공

### 1.2 타겟 사용자
- 중고 상품 구매를 원하는 소비자
- 특정 판매자의 웹몰 방문자
- 데스크톱 및 모바일 웹 사용자

### 1.3 주요 목표
- 직관적인 상품 검색 및 탐색
- 반응형 디자인 (모바일 우선)
- 빠른 페이지 로드 (< 2초)
- SEO 최적화로 검색 유입 증대

---

## 🎯 핵심 기능

### 2.1 기능 목록

| 기능 | 설명 | 우선순위 | 페이지 |
|------|------|----------|---------|
| 상품 목록 보기 | 전체 상품 그리드 뷰 | P0 | 홈페이지 |
| 상품 검색 | 키워드, 카테고리, 필터 | P0 | 검색 페이지 |
| 상품 상세 보기 | 이미지, 설명, 판매자 정보 | P0 | 상품 상세 |
| 판매자 웹몰 | 개인 전용 상품 페이지 | P0 | 판매자 페이지 |
| QR 코드 스캔 | 모바일 QR 스캔 기능 | P0 | QR 스캔 |
| 찜하기 | 관심 상품 저장 | P1 | 마이페이지 |
| 판매자 연락 | 카카오톡 채팅 연결 | P1 | 상품 상세 |
| 회원가입/로그인 | 카카오 OAuth | P1 | 로그인 |
| 거래 후기 | 별점 및 리뷰 | P2 | 상품 상세 |

---

## 🖥️ 화면 설계

### 3.1 사이트맵

```
에버세컨즈 웹사이트
├── 홈페이지 (/)
│   ├── 최신 상품
│   ├── 인기 상품
│   └── 카테고리
│
├── 상품 목록 (/products)
│   ├── 전체 상품
│   ├── 카테고리별
│   └── 검색 결과
│
├── 상품 상세 (/product/[id])
│   ├── 상품 정보
│   ├── 판매자 정보
│   └── 연락하기
│
├── 판매자 웹몰 (/shop/[seller])
│   ├── 판매자 소개
│   └── 판매자 상품
│
├── 검색 (/search)
│   ├── 검색 결과
│   └── 필터/정렬
│
├── QR 스캔 (/qr-scan)
│   └── 스캔 결과
│
├── 마이페이지 (/my)
│   ├── 찜한 상품
│   ├── 최근 본 상품
│   └── 프로필 설정
│
└── 로그인 (/login)
    └── 카카오 로그인
```

### 3.2 상세 화면 설계

---

#### 화면 1: 홈페이지

**목적**: 사용자를 환영하고 주요 상품 노출

**데스크톱 레이아웃** (1280px):
```
┌─────────────────────────────────────────────────────────────┐
│ 에버세컨즈 🎯    [검색창]         찜하기  판매하기  로그인   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│                    히어로 섹션                              │
│  ┌───────────────────────────────────────────────────────┐ │
│  │                                                       │ │
│  │        중고 거래의 새로운 기준, 에버세컨즈             │ │
│  │        나만의 웹몰을 만들어보세요                     │ │
│  │                                                       │ │
│  │        [🔍 상품 검색하기]   [📦 판매 시작하기]        │ │
│  │                                                       │ │
│  └───────────────────────────────────────────────────────┘ │
│                                                             │
│  ─────────── 최신 등록 상품 ───────────           [더보기] │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐         │
│  │img │  │img │  │img │  │img │  │img │  │img │         │
│  │상품 │  │상품 │  │상품 │  │상품 │  │상품 │  │상품 │         │
│  │1만원│  │2만원│  │3만원│  │4만원│  │5만원│  │6만원│         │
│  └────┘  └────┘  └────┘  └────┘  └────┘  └────┘         │
│                                                             │
│  ─────────── 인기 카테고리 ───────────                     │
│  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐       │
│  │ 👔   │  │ 📱   │  │ 💻   │  │ 📚   │  │ 🏡   │       │
│  │의류  │  │전자  │  │디지털│  │도서  │  │가구  │       │
│  │패션  │  │기기  │  │가전  │  │문구  │  │인테리어│       │
│  └──────┘  └──────┘  └──────┘  └──────┘  └──────┘       │
│                                                             │
│  ─────────── 이주의 베스트 셀러 ───────────        [더보기] │
│  ┌────────┐  ┌────────┐  ┌────────┐  ┌────────┐         │
│  │        │  │        │  │        │  │        │         │
│  │  img   │  │  img   │  │  img   │  │  img   │         │
│  │        │  │        │  │        │  │        │         │
│  │ 상품명  │  │ 상품명  │  │ 상품명  │  │ 상품명  │         │
│  │ 50만원 │  │ 30만원 │  │ 20만원 │  │ 10만원 │         │
│  │ ⭐ 4.8 │  │ ⭐ 4.9 │  │ ⭐ 4.7 │  │ ⭐ 4.6 │         │
│  └────────┘  └────────┘  └────────┘  └────────┘         │
│                                                             │
│  ─────────── 추천 판매자 ───────────                       │
│  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐  ┌─────┐           │
│  │ 👤  │  │ 👤  │  │ 👤  │  │ 👤  │  │ 👤  │           │
│  │홍길동│  │김철수│  │이영희│  │박민수│  │정수진│           │
│  │상품12│  │상품 8│  │상품15│  │상품 6│  │상품10│           │
│  └─────┘  └─────┘  └─────┘  └─────┘  └─────┘           │
│                                                             │
└─────────────────────────────────────────────────────────────┘
┌─────────────────────────────────────────────────────────────┐
│                         푸터                                │
│  회사 소개  |  이용약관  |  개인정보처리방침  |  고객센터     │
│  © 2023 에버세컨즈. All rights reserved.                    │
└─────────────────────────────────────────────────────────────┘
```

**모바일 레이아웃** (375px):
```
┌──────────────────────┐
│ ☰  에버세컨즈  🔍 👤 │
├──────────────────────┤
│                      │
│    중고 거래의       │
│    새로운 기준       │
│                      │
│  [📦 판매 시작하기]  │
│                      │
├──────────────────────┤
│ 최신 등록 상품   [›] │
│                      │
│ ┌────┐  ┌────┐      │
│ │img │  │img │      │
│ │상품 │  │상품 │  →  │
│ └────┘  └────┘      │
│                      │
├──────────────────────┤
│ 인기 카테고리        │
│                      │
│ 👔 의류  📱 전자     │
│ 💻 디지털 📚 도서    │
│                      │
├──────────────────────┤
│ 이주의 베스트    [›] │
│                      │
│ ┌──────────┐        │
│ │   img    │        │
│ │  상품명   │        │
│ │  50만원  │        │
│ └──────────┘        │
│                      │
└──────────────────────┘
```

**주요 컴포넌트**:

**네비게이션 바**:
```typescript
interface NavigationBar {
  logo: Logo;
  searchBar: SearchInput;
  actions: {
    wishlist: IconButton;
    sell: PrimaryButton;
    profile: UserMenu;
  };
}
```

**히어로 섹션**:
```typescript
interface HeroSection {
  title: string;           // "중고 거래의 새로운 기준"
  subtitle: string;        // "나만의 웹몰을 만들어보세요"
  backgroundImage?: string;
  primaryCTA: Button;      // "상품 검색하기"
  secondaryCTA: Button;    // "판매 시작하기"
}
```

**상품 카드**:
```typescript
interface ProductCard {
  id: string;
  images: string[];
  title: string;
  price: number;
  originalPrice?: number;
  condition: string;
  location: string;
  seller: {
    id: string;
    name: string;
    avatar?: string;
  };
  views: number;
  likes: number;
  createdAt: Date;
}
```

**데이터 로딩**:
```typescript
async function fetchLatestProducts(limit: number = 12) {
  const { data, error } = await supabase
    .from('products')
    .select(`
      *,
      seller:users(id, name, avatar_url),
      category:categories(id, name, icon)
    `)
    .eq('status', 'active')
    .order('created_at', { ascending: false })
    .limit(limit);

  return data;
}
```

---

#### 화면 2: 상품 목록 페이지

**목적**: 전체 상품 탐색 및 필터링

**데스크톱 레이아웃**:
```
┌─────────────────────────────────────────────────────────────┐
│ 에버세컨즈 🎯    [검색창]         찜하기  판매하기  로그인   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  홈 > 전체 상품                                    정렬: ▼   │
│                                                             │
│  ┌────────┐  ┌──────────────────────────────────────────┐ │
│  │        │  │  필터                                    │ │
│  │ 카테고리│  │  ────────────────────────────────────── │ │
│  │        │  │                                          │ │
│  │ 📱전자 │  │  가격 범위                               │ │
│  │ 💻디지털│  │  ├─────●──────────────●─────┤          │ │
│  │ 👔의류 │  │  10,000원        500,000원              │ │
│  │ 📚도서 │  │                                          │ │
│  │ 🏡가구 │  │  상품 상태                               │ │
│  │ 🎨예술 │  │  ☑ 새제품  ☑ 중고                       │ │
│  │        │  │                                          │ │
│  │[적용]  │  │  거래 방법                               │ │
│  │        │  │  ☐ 직거래  ☐ 택배                       │ │
│  │        │  │                                          │ │
│  │        │  │  지역                                    │ │
│  │        │  │  [서울시 강남구        ▼]               │ │
│  │        │  │                                          │ │
│  │        │  │  [필터 초기화]  [적용하기]               │ │
│  │        │  └──────────────────────────────────────────┘ │
│  │        │                                              │ │
│  └────────┘  상품 1,234개                                │ │
│              ┌────┐  ┌────┐  ┌────┐  ┌────┐            │ │
│              │img │  │img │  │img │  │img │            │ │
│              │상품 │  │상품 │  │상품 │  │상품 │            │ │
│              │1만원│  │2만원│  │3만원│  │4만원│            │ │
│              └────┘  └────┘  └────┘  └────┘            │ │
│                                                             │
│              ┌────┐  ┌────┐  ┌────┐  ┌────┐            │ │
│              │img │  │img │  │img │  │img │            │ │
│              │상품 │  │상품 │  │상품 │  │상품 │            │ │
│              │5만원│  │6만원│  │7만원│  │8만원│            │ │
│              └────┘  └────┘  └────┘  └────┘            │ │
│                                                             │
│              ┌────┐  ┌────┐  ┌────┐  ┌────┐            │ │
│              │img │  │img │  │img │  │img │            │ │
│              │상품 │  │상품 │  │상품 │  │상품 │            │ │
│              │9만원│  │10만 │  │11만 │  │12만 │            │ │
│              └────┘  └────┘  └────┘  └────┘            │ │
│                                                             │
│              ◀  1  2  3 ... 103  ▶                         │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**필터 시스템**:
```typescript
interface ProductFilters {
  categories: string[];      // 카테고리 ID 배열
  priceRange: {
    min: number;
    max: number;
  };
  condition: ('new' | 'used')[];
  tradeMethods: ('direct' | 'delivery')[];
  location?: string;
  sortBy: 'latest' | 'price_asc' | 'price_desc' | 'popular';
}

async function fetchFilteredProducts(filters: ProductFilters, page: number = 1) {
  let query = supabase
    .from('products')
    .select('*, seller:users(*), category:categories(*)', { count: 'exact' })
    .eq('status', 'active');

  // 카테고리 필터
  if (filters.categories.length > 0) {
    query = query.in('category_id', filters.categories);
  }

  // 가격 필터
  if (filters.priceRange.min > 0) {
    query = query.gte('price', filters.priceRange.min);
  }
  if (filters.priceRange.max > 0) {
    query = query.lte('price', filters.priceRange.max);
  }

  // 상품 상태 필터
  if (filters.condition.length > 0) {
    query = query.in('condition', filters.condition);
  }

  // 정렬
  switch (filters.sortBy) {
    case 'latest':
      query = query.order('created_at', { ascending: false });
      break;
    case 'price_asc':
      query = query.order('price', { ascending: true });
      break;
    case 'price_desc':
      query = query.order('price', { ascending: false });
      break;
    case 'popular':
      query = query.order('views', { ascending: false });
      break;
  }

  // 페이지네이션
  const ITEMS_PER_PAGE = 24;
  const from = (page - 1) * ITEMS_PER_PAGE;
  const to = from + ITEMS_PER_PAGE - 1;
  query = query.range(from, to);

  const { data, error, count } = await query;

  return {
    products: data,
    totalCount: count,
    totalPages: Math.ceil((count || 0) / ITEMS_PER_PAGE),
  };
}
```

**그리드 반응형**:
```css
.product-grid {
  display: grid;
  gap: 1.5rem;
}

/* 모바일: 1열 */
@media (min-width: 375px) {
  .product-grid {
    grid-template-columns: repeat(1, 1fr);
  }
}

/* 태블릿: 2열 */
@media (min-width: 640px) {
  .product-grid {
    grid-template-columns: repeat(2, 1fr);
  }
}

/* 데스크톱: 4열 */
@media (min-width: 1024px) {
  .product-grid {
    grid-template-columns: repeat(4, 1fr);
  }
}
```

---

#### 화면 3: 상품 상세 페이지

**목적**: 상품 정보 상세 표시 및 구매 연결

**데스크톱 레이아웃**:
```
┌─────────────────────────────────────────────────────────────┐
│ 에버세컨즈 🎯    [검색창]         찜하기  판매하기  로그인   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  홈 > 전자기기 > 스마트폰 > 아이폰 13 Pro                    │
│                                                             │
│  ┌──────────────────────┐  ┌─────────────────────────────┐│
│  │                      │  │ 아이폰 13 Pro 128GB          ││
│  │                      │  │ 그래파이트                   ││
│  │   메인 이미지         │  │                             ││
│  │                      │  │ 800,000원                   ││
│  │   [확대보기]          │  │ (정가: 1,350,000원)          ││
│  │                      │  │                             ││
│  └──────────────────────┘  │ 판매자: 홍길동               ││
│  ┌──┐┌──┐┌──┐┌──┐┌──┐   │ 조회 124회 · 10시간 전       ││
│  │1 ││2 ││3 ││4 ││5 │   │                             ││
│  └──┘└──┘└──┘└──┘└──┘   │ ♡ 찜하기 (23)    ⚠️ 신고     ││
│  썸네일 이미지            │                             ││
│                          │ ┌─────────────────────────┐ ││
│                          │ │ 💬 판매자에게 연락하기   │ ││
│                          │ └─────────────────────────┘ ││
│                          │                             ││
│                          │ 🏷️ 카테고리                ││
│                          │ 전자기기 > 스마트폰          ││
│                          │                             ││
│                          │ 📦 상품 상태                ││
│                          │ 중상급 (사용감 거의 없음)    ││
│                          │                             ││
│                          │ 🚚 거래 방법                ││
│                          │ 직거래, 택배 거래            ││
│                          │                             ││
│                          │ 📍 거래 지역 (직거래)        ││
│                          │ 서울시 강남구                ││
│                          └─────────────────────────────┘│
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  상품 정보                                                  │
│  ┌──────────────────────────────────────────────────────┐ │
│  │                                                      │ │
│  │  2023년 9월에 구매했으며, 보호필름과 케이스를        │ │
│  │  사용하여 스크래치가 거의 없습니다.                  │ │
│  │                                                      │ │
│  │  배터리 성능: 92%                                    │ │
│  │  보증 기간: 2024년 9월까지                           │ │
│  │                                                      │ │
│  │  구성품:                                             │ │
│  │  - 본체                                              │ │
│  │  - 정품 충전기                                       │ │
│  │  - 정품 케이블                                       │ │
│  │  - 보호필름 (부착됨)                                 │ │
│  │  - 케이스 2개                                        │ │
│  │                                                      │ │
│  └──────────────────────────────────────────────────────┘ │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  판매자 정보                                                │
│  ┌──────────────────────────────────────────────────────┐ │
│  │  ┌───┐                                               │ │
│  │  │👤 │  홍길동                                       │ │
│  │  └───┘  ⭐ 4.8 (거래 12건)                           │ │
│  │                                                      │ │
│  │  "안전 거래를 최우선으로 합니다"                     │ │
│  │                                                      │ │
│  │  [홍길동의 웹몰 방문하기 →]                          │ │
│  └──────────────────────────────────────────────────────┘ │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  이 판매자의 다른 상품                                      │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐                        │
│  │img │  │img │  │img │  │img │                        │
│  │상품 │  │상품 │  │상품 │  │상품 │                        │
│  └────┘  └────┘  └────┘  └────┘                        │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  비슷한 상품                                                │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐                        │
│  │img │  │img │  │img │  │img │                        │
│  │상품 │  │상품 │  │상품 │  │상품 │                        │
│  └────┘  └────┘  └────┘  └────┘                        │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**이미지 갤러리 컴포넌트**:
```typescript
interface ImageGallery {
  images: string[];
  currentIndex: number;
  onImageChange: (index: number) => void;
  onZoom: () => void;
}

function ImageGallery({ images, currentIndex, onImageChange, onZoom }: ImageGallery) {
  return (
    <div className="image-gallery">
      {/* 메인 이미지 */}
      <div className="main-image" onClick={onZoom}>
        <img src={images[currentIndex]} alt={`상품 이미지 ${currentIndex + 1}`} />
        <button className="zoom-button">🔍 확대</button>
      </div>

      {/* 썸네일 */}
      <div className="thumbnails">
        {images.map((image, index) => (
          <div
            key={index}
            className={`thumbnail ${index === currentIndex ? 'active' : ''}`}
            onClick={() => onImageChange(index)}
          >
            <img src={image} alt={`썸네일 ${index + 1}`} />
          </div>
        ))}
      </div>
    </div>
  );
}
```

**연락하기 기능**:
```typescript
async function contactSeller(productId: string, sellerId: string) {
  // 로그인 확인
  if (!currentUser) {
    router.push('/login?redirect=/product/' + productId);
    return;
  }

  try {
    // 연락 이벤트 로깅
    await supabase.from('contact_logs').insert({
      product_id: productId,
      buyer_id: currentUser.id,
      seller_id: sellerId,
      contacted_at: new Date().toISOString(),
    });

    // 판매자의 카카오톡 채널로 연결
    const { data: seller } = await supabase
      .from('users')
      .select('kakao_channel_url')
      .eq('id', sellerId)
      .single();

    if (seller?.kakao_channel_url) {
      window.open(seller.kakao_channel_url, '_blank');
    } else {
      // 대체: 플랫폼 내 메시지 시스템
      router.push(`/messages/new?to=${sellerId}&product=${productId}`);
    }

    showSuccess('판매자에게 연락 요청을 보냈습니다.');

  } catch (error) {
    console.error('연락 실패:', error);
    showError('연락에 실패했습니다. 다시 시도해주세요.');
  }
}
```

**데이터 로딩**:
```typescript
async function fetchProductDetail(productId: string) {
  const { data, error } = await supabase
    .from('products')
    .select(`
      *,
      seller:users(
        id,
        name,
        avatar_url,
        rating,
        total_sales,
        bio,
        kakao_channel_url
      ),
      category:categories(id, name, icon),
      subcategory:subcategories(id, name)
    `)
    .eq('id', productId)
    .single();

  if (error) throw error;

  // 조회수 증가
  await supabase.rpc('increment_views', { product_id: productId });

  return data;
}
```

---

#### 화면 4: 판매자 웹몰 (개인 페이지)

**목적**: 판매자 전용 상품 쇼케이스

**레이아웃**:
```
┌─────────────────────────────────────────────────────────────┐
│ 에버세컨즈 🎯    [검색창]         찜하기  판매하기  로그인   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │                 커버 이미지                          │  │
│  │                                                      │  │
│  │  ┌────┐                                             │  │
│  │  │👤  │  홍길동의 웹몰                               │  │
│  │  └────┘  ⭐ 4.8 (거래 12건)                         │  │
│  │          판매 상품 24개                              │  │
│  │                                                      │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  💬 판매자 소개                                      │  │
│  │  ────────────────────────────────────────────────── │  │
│  │  안전 거래를 최우선으로 합니다.                      │  │
│  │  주로 전자제품을 판매하며, 모든 상품은 철저히        │  │
│  │  검수한 후 등록하고 있습니다.                        │  │
│  │                                                      │  │
│  │  🏷️ 주요 카테고리: 전자기기, 디지털가전             │  │
│  │  📍 거래 지역: 서울시 강남구                         │  │
│  │  📞 연락 방법: 카카오톡                              │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                             │
│  [전체 상품] [판매중] [예약중] [판매완료]     정렬: 최신순▼ │
│                                                             │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐        │
│  │img │  │img │  │img │  │img │  │img │  │img │        │
│  │상품 │  │상품 │  │상품 │  │상품 │  │상품 │  │상품 │        │
│  │1만원│  │2만원│  │3만원│  │4만원│  │5만원│  │6만원│        │
│  └────┘  └────┘  └────┘  └────┘  └────┘  └────┘        │
│                                                             │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐        │
│  │img │  │img │  │img │  │img │  │img │  │img │        │
│  │상품 │  │상품 │  │상품 │  │상품 │  │상품 │  │상품 │        │
│  │7만원│  │8만원│  │9만원│  │10만 │  │11만 │  │12만 │        │
│  └────┘  └────┘  └────┘  └────┘  └────┘  └────┘        │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  거래 후기 (12개)                                           │
│  ┌──────────────────────────────────────────────────────┐ │
│  │ ⭐⭐⭐⭐⭐  깔끔하고 좋아요!                           │ │
│  │ 김철수 · 2일 전                                      │ │
│  │ "상품 상태가 설명과 동일했습니다. 감사합니다!"        │ │
│  └──────────────────────────────────────────────────────┘ │
│                                                             │
│  ┌──────────────────────────────────────────────────────┐ │
│  │ ⭐⭐⭐⭐⭐  친절하세요                                │ │
│  │ 이영희 · 5일 전                                      │ │
│  │ "매우 만족스러운 거래였습니다!"                      │ │
│  └──────────────────────────────────────────────────────┘ │
│                                                             │
│  [더보기]                                                   │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**URL 구조**:
```
everseconds.com/shop/[seller-slug]
everseconds.com/shop/홍길동
everseconds.com/@홍길동
```

**데이터 로딩**:
```typescript
async function fetchSellerShop(sellerSlug: string) {
  // 판매자 정보
  const { data: seller, error: sellerError } = await supabase
    .from('users')
    .select('*')
    .eq('slug', sellerSlug)
    .single();

  if (sellerError) throw sellerError;

  // 판매자의 상품
  const { data: products, error: productsError } = await supabase
    .from('products')
    .select('*')
    .eq('seller_id', seller.id)
    .eq('status', 'active')
    .order('created_at', { ascending: false });

  if (productsError) throw productsError;

  // 거래 후기
  const { data: reviews, error: reviewsError } = await supabase
    .from('reviews')
    .select('*, buyer:users(name, avatar_url)')
    .eq('seller_id', seller.id)
    .order('created_at', { ascending: false })
    .limit(10);

  if (reviewsError) throw reviewsError;

  return {
    seller,
    products,
    reviews,
  };
}
```

**공유 기능**:
```typescript
function shareSellerShop(sellerName: string, sellerSlug: string) {
  const url = `https://everseconds.com/shop/${sellerSlug}`;
  const title = `${sellerName}의 웹몰 - 에버세컨즈`;
  const text = `${sellerName}님의 중고 상품을 구경해보세요!`;

  // Web Share API
  if (navigator.share) {
    navigator.share({ title, text, url });
  } else {
    // 대체: 클립보드 복사
    navigator.clipboard.writeText(url);
    showSuccess('링크가 복사되었습니다!');
  }
}
```

---

#### 화면 5: 검색 페이지

**목적**: 키워드 기반 상품 검색

**레이아웃**:
```
┌─────────────────────────────────────────────────────────────┐
│ 에버세컨즈 🎯    [검색창: "아이폰"]    찜하기  판매하기  로그인│
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  "아이폰" 검색 결과: 42개                        정렬: ▼    │
│                                                             │
│  ┌──────────────────────────────────────────────────────┐  │
│  │  추천 검색어                                         │  │
│  │  [아이폰 13]  [아이폰 14]  [아이폰 프로]             │  │
│  └──────────────────────────────────────────────────────┘  │
│                                                             │
│  [전체] [전자기기] [액세서리]                               │
│                                                             │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐                          │
│  │img │  │img │  │img │  │img │                          │
│  │아이폰│  │아이폰│  │아이폰│  │아이폰│                          │
│  │13Pro│  │14   │  │12   │  │SE  │                          │
│  │80만 │  │110만│  │60만 │  │35만 │                          │
│  └────┘  └────┘  └────┘  └────┘                          │
│                                                             │
│  ... 더 많은 결과 ...                                       │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  이런 상품은 어떠세요?                                      │
│  ┌────┐  ┌────┐  ┌────┐                                  │
│  │갤럭시│  │아이패드│  │맥북  │                                  │
│  └────┘  └────┘  └────┘                                  │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**검색 로직**:
```typescript
async function searchProducts(query: string, filters?: ProductFilters) {
  // Full-text search 사용
  const { data, error } = await supabase
    .from('products')
    .select('*, seller:users(*), category:categories(*)')
    .textSearch('fts', query, {
      type: 'websearch',
      config: 'korean', // 한국어 검색 설정
    })
    .eq('status', 'active')
    .order('created_at', { ascending: false });

  if (error) throw error;

  return data;
}
```

**자동완성**:
```typescript
async function getSearchSuggestions(query: string) {
  const { data, error } = await supabase
    .rpc('search_suggestions', { search_query: query });

  return data;
}
```

---

#### 화면 6: QR 코드 스캔 페이지

**목적**: 모바일에서 QR 코드 스캔하여 상품 확인

**모바일 레이아웃**:
```
┌──────────────────────┐
│  ← QR 코드 스캔      │
├──────────────────────┤
│                      │
│  ┌────────────────┐ │
│  │                │ │
│  │   카메라 뷰     │ │
│  │                │ │
│  │  ┌──────────┐  │ │
│  │  │          │  │ │
│  │  │  스캔    │  │ │
│  │  │  영역    │  │ │
│  │  │          │  │ │
│  │  └──────────┘  │ │
│  │                │ │
│  └────────────────┘ │
│                      │
│  QR 코드를 스캔하세요│
│                      │
│ [📷 갤러리에서 선택] │
│                      │
└──────────────────────┘

        ↓ 스캔 성공

┌──────────────────────┐
│  ← 상품 정보         │
├──────────────────────┤
│                      │
│  ✅ QR 코드 인증 완료│
│                      │
│  ┌────────────────┐ │
│  │                │ │
│  │   상품 이미지   │ │
│  │                │ │
│  └────────────────┘ │
│                      │
│  아이폰 13 Pro       │
│  800,000원          │
│                      │
│  판매자: 홍길동      │
│  등록일: 2023.10.30 │
│                      │
│ [📄 상품 상세 보기]  │
│ [💬 판매자 연락하기] │
│                      │
└──────────────────────┘
```

**QR 스캔 로직**:
```typescript
import { Html5Qrcode } from 'html5-qrcode';

async function startQRScanner() {
  const html5QrCode = new Html5Qrcode('qr-reader');

  try {
    await html5QrCode.start(
      { facingMode: 'environment' }, // 후면 카메라
      {
        fps: 10,
        qrbox: { width: 250, height: 250 },
      },
      async (decodedText) => {
        // QR 코드 데이터 파싱
        const qrData = JSON.parse(decodedText);

        // 상품 정보 가져오기
        const product = await fetchProductDetail(qrData.productId);

        // 상품 페이지로 이동
        router.push(`/product/${qrData.productId}`);

        // 스캐너 중지
        await html5QrCode.stop();
      },
      (errorMessage) => {
        // 스캔 실패 (무시)
      }
    );
  } catch (error) {
    console.error('QR 스캔 실패:', error);
    showError('카메라 접근 권한이 필요합니다.');
  }
}
```

---

#### 화면 7: 마이페이지

**목적**: 사용자 활동 관리

**레이아웃**:
```
┌─────────────────────────────────────────────────────────────┐
│ 에버세컨즈 🎯    [검색창]         찜하기  판매하기  로그인   │
├─────────────────────────────────────────────────────────────┤
│                                                             │
│  ┌────┐                                                     │
│  │👤  │  홍길동님                                           │
│  └────┘  gildong@kakao.com                                 │
│          [프로필 수정]                                      │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  내 활동                                                    │
│  ┌──────────────┐  ┌──────────────┐  ┌──────────────┐    │
│  │ 💖 찜한 상품 │  │ 👀 최근 본   │  │ 📦 내가 판매 │    │
│  │     12개     │  │     24개     │  │     8개      │    │
│  └──────────────┘  └──────────────┘  └──────────────┘    │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  찜한 상품 (12개)                                  [더보기] │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐                          │
│  │img │  │img │  │img │  │img │                          │
│  │상품 │  │상품 │  │상품 │  │상품 │                          │
│  └────┘  └────┘  └────┘  └────┘                          │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  최근 본 상품 (24개)                               [더보기] │
│  ┌────┐  ┌────┐  ┌────┐  ┌────┐                          │
│  │img │  │img │  │img │  │img │                          │
│  │상품 │  │상품 │  │상품 │  │상품 │                          │
│  └────┘  └────┘  └────┘  └────┘                          │
│                                                             │
│  ───────────────────────────────────────────────────────── │
│                                                             │
│  설정                                                       │
│  📱 알림 설정                                        →      │
│  🔒 개인정보 설정                                    →      │
│  ❓ 고객센터                                         →      │
│  📜 이용약관                                         →      │
│  🚪 로그아웃                                                │
│                                                             │
└─────────────────────────────────────────────────────────────┘
```

**찜하기 기능**:
```typescript
async function toggleWishlist(productId: string) {
  if (!currentUser) {
    router.push('/login');
    return;
  }

  try {
    // 현재 찜 상태 확인
    const { data: existing } = await supabase
      .from('wishlists')
      .select('id')
      .eq('user_id', currentUser.id)
      .eq('product_id', productId)
      .single();

    if (existing) {
      // 찜 취소
      await supabase
        .from('wishlists')
        .delete()
        .eq('id', existing.id);

      showSuccess('찜 목록에서 제거되었습니다.');
    } else {
      // 찜 추가
      await supabase
        .from('wishlists')
        .insert({
          user_id: currentUser.id,
          product_id: productId,
          created_at: new Date().toISOString(),
        });

      showSuccess('찜 목록에 추가되었습니다.');
    }

    // 상태 업데이트
    revalidateWishlist();

  } catch (error) {
    console.error('찜하기 실패:', error);
    showError('찜하기에 실패했습니다.');
  }
}
```

---

## 🎨 디자인 시스템

### 4.1 컴포넌트 라이브러리

**기본 컴포넌트**:
```typescript
// Button
interface ButtonProps {
  variant: 'primary' | 'secondary' | 'outline' | 'ghost';
  size: 'sm' | 'md' | 'lg';
  fullWidth?: boolean;
  loading?: boolean;
  disabled?: boolean;
  icon?: ReactNode;
  onClick: () => void;
  children: ReactNode;
}

// Card
interface CardProps {
  hover?: boolean;
  clickable?: boolean;
  padding?: 'none' | 'sm' | 'md' | 'lg';
  children: ReactNode;
}

// Input
interface InputProps {
  type: 'text' | 'email' | 'password' | 'number' | 'tel';
  label?: string;
  placeholder?: string;
  value: string;
  error?: string;
  disabled?: boolean;
  required?: boolean;
  onChange: (value: string) => void;
}

// Badge
interface BadgeProps {
  variant: 'success' | 'warning' | 'error' | 'info';
  size: 'sm' | 'md';
  children: ReactNode;
}
```

### 4.2 레이아웃 시스템

```typescript
// Container
const Container = styled.div`
  width: 100%;
  max-width: 1280px;
  margin: 0 auto;
  padding: 0 1rem;

  @media (min-width: 768px) {
    padding: 0 2rem;
  }
`;

// Grid
const Grid = styled.div<{ cols: number; gap: string }>`
  display: grid;
  grid-template-columns: repeat(${props => props.cols}, 1fr);
  gap: ${props => props.gap};

  @media (max-width: 768px) {
    grid-template-columns: repeat(2, 1fr);
  }

  @media (max-width: 480px) {
    grid-template-columns: 1fr;
  }
`;
```

---

## ⚡ 성능 최적화

### 5.1 이미지 최적화

```typescript
// Next.js Image 컴포넌트 사용
import Image from 'next/image';

function ProductCard({ product }: { product: Product }) {
  return (
    <div className="product-card">
      <Image
        src={product.images[0]}
        alt={product.title}
        width={300}
        height={300}
        sizes="(max-width: 768px) 100vw, (max-width: 1200px) 50vw, 33vw"
        placeholder="blur"
        blurDataURL={product.thumbnail}
        loading="lazy"
      />
    </div>
  );
}
```

### 5.2 코드 스플리팅

```typescript
// 동적 임포트
const QRScanner = dynamic(() => import('@/components/QRScanner'), {
  ssr: false,
  loading: () => <LoadingSpinner />,
});

const AdminDashboard = dynamic(() => import('@/components/AdminDashboard'), {
  ssr: false,
});
```

### 5.3 데이터 캐싱

```typescript
// React Query 사용
import { useQuery } from '@tanstack/react-query';

function useProducts(filters: ProductFilters) {
  return useQuery({
    queryKey: ['products', filters],
    queryFn: () => fetchFilteredProducts(filters),
    staleTime: 5 * 60 * 1000, // 5분
    cacheTime: 10 * 60 * 1000, // 10분
  });
}

// Prefetching
function ProductList() {
  const queryClient = useQueryClient();

  const prefetchProduct = (productId: string) => {
    queryClient.prefetchQuery({
      queryKey: ['product', productId],
      queryFn: () => fetchProductDetail(productId),
    });
  };

  return (
    <div>
      {products.map(product => (
        <ProductCard
          key={product.id}
          product={product}
          onHover={() => prefetchProduct(product.id)}
        />
      ))}
    </div>
  );
}
```

---

## 🔍 SEO 최적화

### 6.1 메타 태그

```typescript
// app/product/[id]/page.tsx
import { Metadata } from 'next';

export async function generateMetadata({ params }: Props): Promise<Metadata> {
  const product = await fetchProductDetail(params.id);

  return {
    title: `${product.title} - ${product.price.toLocaleString()}원 | 에버세컨즈`,
    description: product.description?.slice(0, 155) || `${product.title} 중고 거래`,
    keywords: [product.title, product.category.name, '중고', '거래'],
    openGraph: {
      title: product.title,
      description: product.description,
      images: [product.images[0]],
      type: 'website',
      url: `https://everseconds.com/product/${product.id}`,
    },
    twitter: {
      card: 'summary_large_image',
      title: product.title,
      description: product.description,
      images: [product.images[0]],
    },
  };
}
```

### 6.2 구조화된 데이터

```typescript
// JSON-LD for Product
function generateProductSchema(product: Product) {
  return {
    '@context': 'https://schema.org/',
    '@type': 'Product',
    name: product.title,
    image: product.images,
    description: product.description,
    brand: {
      '@type': 'Brand',
      name: 'Everseconds',
    },
    offers: {
      '@type': 'Offer',
      url: `https://everseconds.com/product/${product.id}`,
      priceCurrency: 'KRW',
      price: product.price,
      itemCondition: 'https://schema.org/UsedCondition',
      availability: 'https://schema.org/InStock',
    },
    aggregateRating: {
      '@type': 'AggregateRating',
      ratingValue: product.seller.rating,
      reviewCount: product.seller.total_reviews,
    },
  };
}
```

### 6.3 사이트맵

```typescript
// app/sitemap.ts
export default async function sitemap() {
  const { data: products } = await supabase
    .from('products')
    .select('id, updated_at')
    .eq('status', 'active');

  const productUrls = products?.map(product => ({
    url: `https://everseconds.com/product/${product.id}`,
    lastModified: new Date(product.updated_at),
    changeFrequency: 'daily' as const,
    priority: 0.8,
  })) || [];

  return [
    {
      url: 'https://everseconds.com',
      lastModified: new Date(),
      changeFrequency: 'daily' as const,
      priority: 1,
    },
    {
      url: 'https://everseconds.com/products',
      lastModified: new Date(),
      changeFrequency: 'hourly' as const,
      priority: 0.9,
    },
    ...productUrls,
  ];
}
```

---

## 📱 반응형 디자인

### 7.1 브레이크포인트

```typescript
const breakpoints = {
  mobile: '375px',
  tablet: '768px',
  desktop: '1024px',
  wide: '1280px',
};

// Tailwind 설정
module.exports = {
  theme: {
    screens: {
      sm: '375px',
      md: '768px',
      lg: '1024px',
      xl: '1280px',
      '2xl': '1536px',
    },
  },
};
```

### 7.2 모바일 우선 접근

```css
/* 기본 스타일 (모바일) */
.product-grid {
  display: grid;
  grid-template-columns: 1fr;
  gap: 1rem;
}

/* 태블릿 */
@media (min-width: 768px) {
  .product-grid {
    grid-template-columns: repeat(2, 1fr);
    gap: 1.5rem;
  }
}

/* 데스크톱 */
@media (min-width: 1024px) {
  .product-grid {
    grid-template-columns: repeat(4, 1fr);
    gap: 2rem;
  }
}
```

---

## 🔒 보안

### 8.1 XSS 방어

```typescript
// DOMPurify 사용
import DOMPurify from 'dompurify';

function ProductDescription({ description }: { description: string }) {
  const sanitizedDescription = DOMPurify.sanitize(description, {
    ALLOWED_TAGS: ['b', 'i', 'em', 'strong', 'p', 'br'],
    ALLOWED_ATTR: [],
  });

  return (
    <div dangerouslySetInnerHTML={{ __html: sanitizedDescription }} />
  );
}
```

### 8.2 CSRF 방어

```typescript
// Next.js API Routes
import { getToken } from 'next-auth/jwt';

export async function POST(req: Request) {
  const token = await getToken({ req });

  if (!token) {
    return new Response('Unauthorized', { status: 401 });
  }

  // 요청 처리
}
```

---

## 📊 분석 및 추적

### 9.1 Google Analytics

```typescript
// app/layout.tsx
import { GoogleAnalytics } from '@next/third-parties/google';

export default function RootLayout({ children }: { children: React.ReactNode }) {
  return (
    <html>
      <body>
        {children}
        <GoogleAnalytics gaId="G-XXXXXXXXXX" />
      </body>
    </html>
  );
}
```

### 9.2 사용자 이벤트 추적

```typescript
// lib/analytics.ts
export function trackEvent(eventName: string, properties?: Record<string, any>) {
  if (typeof window !== 'undefined' && window.gtag) {
    window.gtag('event', eventName, properties);
  }
}

// 사용 예시
trackEvent('product_view', {
  product_id: product.id,
  product_name: product.title,
  price: product.price,
  category: product.category.name,
});

trackEvent('add_to_wishlist', {
  product_id: product.id,
});

trackEvent('contact_seller', {
  product_id: product.id,
  seller_id: product.seller.id,
});
```

---

## 🧪 테스트

### 10.1 E2E 테스트

```typescript
// tests/e2e/product-search.spec.ts
import { test, expect } from '@playwright/test';

test('상품 검색 및 상세 보기', async ({ page }) => {
  // 홈페이지 방문
  await page.goto('/');

  // 검색
  await page.fill('[data-testid="search-input"]', '아이폰');
  await page.press('[data-testid="search-input"]', 'Enter');

  // 검색 결과 확인
  await expect(page.locator('[data-testid="search-results"]')).toBeVisible();

  // 첫 번째 상품 클릭
  await page.click('[data-testid="product-card"]:first-child');

  // 상품 상세 페이지 확인
  await expect(page.locator('[data-testid="product-title"]')).toBeVisible();
  await expect(page.locator('[data-testid="product-price"]')).toBeVisible();
  await expect(page.locator('[data-testid="contact-seller"]')).toBeVisible();
});
```

---

## 📞 고객 지원

### 11.1 FAQ 컴포넌트

```typescript
const faqs = [
  {
    question: '구매는 어떻게 하나요?',
    answer: '상품 상세 페이지에서 "판매자에게 연락하기" 버튼을 눌러 직접 거래하실 수 있습니다.',
  },
  {
    question: '환불이 가능한가요?',
    answer: '에버세컨즈는 개인 간 거래 플랫폼이므로, 환불은 판매자와 협의하셔야 합니다.',
  },
  // ... 더 많은 FAQ
];

function FAQSection() {
  return (
    <div className="faq-section">
      {faqs.map((faq, index) => (
        <Accordion key={index}>
          <AccordionItem>
            <AccordionButton>{faq.question}</AccordionButton>
            <AccordionPanel>{faq.answer}</AccordionPanel>
          </AccordionItem>
        </Accordion>
      ))}
    </div>
  );
}
```

---

**문서 버전**: 1.0
**최종 수정일**: 2025-10-30
**작성자**: 에버세컨즈 개발팀
**관련 문서**: [프로젝트 개요](./프로젝트_개요.md), [판매자 키오스크 인터페이스 기획서](./판매자_키오스크_인터페이스_기획서.md)
