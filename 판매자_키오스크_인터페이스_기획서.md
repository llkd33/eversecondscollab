# 판매자 키오스크 인터페이스 기획서

## 📱 개요

### 1.1 목적
오프라인 매장에 설치된 태블릿/키오스크를 통해 판매자가 중고 상품을 간편하게 등록하고 QR 코드를 발급받을 수 있는 인터페이스 제공

### 1.2 타겟 사용자
- 중고 상품을 판매하려는 일반 사용자
- 오프라인 매장 방문 고객
- 기술에 익숙하지 않은 사용자 포함

### 1.3 주요 목표
- 3분 이내 상품 등록 완료
- 직관적이고 쉬운 UI
- 실물 키오스크 환경 최적화
- 안정적인 오프라인 작동

---

## 🎯 핵심 기능

### 2.1 기능 목록

| 기능 | 설명 | 우선순위 | 예상 소요시간 |
|------|------|----------|--------------|
| 사용자 인증 | 카카오톡 로그인 | P0 | 30초 |
| 상품 정보 입력 | 제목, 가격, 카테고리 등 | P0 | 1분 |
| 사진 촬영/업로드 | 최대 10장 | P0 | 1분 |
| QR 코드 생성 | 상품별 고유 QR | P0 | 즉시 |
| 등록 완료 확인 | QR 코드 출력/저장 | P0 | 30초 |
| 내 상품 관리 | 등록 상품 목록 조회 | P1 | - |
| 상품 수정/삭제 | 기존 상품 관리 | P1 | - |

---

## 🖥️ 화면 설계

### 3.1 화면 구조

```
키오스크 앱 화면 플로우
═══════════════════════

[시작 화면]
    │
    ├─→ [로그인/회원가입]
    │       │
    │       └─→ 카카오톡 로그인
    │               │
    ↓               ↓
[메인 대시보드] ←────┘
    │
    ├─→ [새 상품 등록]
    │       │
    │       ├─→ [카테고리 선택]
    │       │       │
    │       ├─→ [상품 정보 입력]
    │       │       │
    │       ├─→ [사진 촬영/업로드]
    │       │       │
    │       ├─→ [정보 확인]
    │       │       │
    │       └─→ [등록 완료 & QR 생성]
    │
    ├─→ [내 상품 목록]
    │       │
    │       ├─→ [상품 상세]
    │       │       │
    │       │       ├─→ [수정]
    │       │       └─→ [삭제]
    │       │
    │       └─→ [QR 재출력]
    │
    └─→ [설정/로그아웃]
```

### 3.2 상세 화면 설계

---

#### 화면 1: 시작 화면 (Welcome Screen)

**목적**: 사용자를 환영하고 서비스 소개

**레이아웃**:
```
┌────────────────────────────────────────┐
│          에버세컨즈 로고 🎯              │
│                                        │
│      중고 상품을 쉽고 빠르게 등록        │
│         나만의 웹몰을 만들어보세요       │
│                                        │
│    [일러스트: 상품 등록 프로세스]        │
│                                        │
│                                        │
│   ┌──────────────────────────────┐   │
│   │  카카오톡으로 시작하기  🗣️    │   │
│   └──────────────────────────────┘   │
│                                        │
│       이미 계정이 있으신가요? 로그인     │
│                                        │
└────────────────────────────────────────┘
```

**UI 요소**:
- 로고: 상단 중앙, 크기 80x80px
- 메인 카피: 24px, Bold
- 서브 카피: 16px, Regular
- CTA 버튼: 카카오 옐로우 (#FEE500), 56px 높이
- 하단 텍스트: 링크 스타일, 14px

**인터랙션**:
- "카카오톡으로 시작하기" 버튼 → 카카오 OAuth 실행
- "로그인" 텍스트 → 로그인 화면으로 이동
- 화면 터치 시 자동 깨우기

---

#### 화면 2: 로그인 화면

**목적**: 기존 사용자 로그인

**레이아웃**:
```
┌────────────────────────────────────────┐
│  ← 뒤로                      [X] 닫기  │
│                                        │
│           로그인                        │
│                                        │
│                                        │
│   ┌──────────────────────────────┐   │
│   │  카카오톡으로 로그인  🗣️      │   │
│   └──────────────────────────────┘   │
│                                        │
│              또는                      │
│                                        │
│   ┌──────────────────────────────┐   │
│   │  게스트로 둘러보기            │   │
│   └──────────────────────────────┘   │
│                                        │
│                                        │
│      처음이신가요? 회원가입하기         │
│                                        │
└────────────────────────────────────────┘
```

**인터랙션**:
- 카카오 로그인 성공 → 메인 대시보드
- 게스트 모드 → 상품 둘러보기만 가능
- 회원가입 → 카카오 OAuth 후 프로필 설정

---

#### 화면 3: 메인 대시보드

**목적**: 주요 기능 접근 허브

**레이아웃** (태블릿 가로 모드):
```
┌──────────────────────────────────────────────────┐
│  에버세컨즈 🎯           안녕하세요, 홍길동님! 👋  │
├──────────────────────────────────────────────────┤
│                                                  │
│   ┌─────────────────┐   ┌─────────────────┐    │
│   │                 │   │                 │    │
│   │   📸 새 상품    │   │   📦 내 상품    │    │
│   │     등록하기    │   │      관리       │    │
│   │                 │   │                 │    │
│   │   시작하기 →    │   │   12개 등록     │    │
│   │                 │   │                 │    │
│   └─────────────────┘   └─────────────────┘    │
│                                                  │
│   ┌─────────────────┐   ┌─────────────────┐    │
│   │                 │   │                 │    │
│   │   📊 판매 통계  │   │   ⚙️ 설정       │    │
│   │                 │   │                 │    │
│   │   조회수 246회  │   │   프로필/알림   │    │
│   │                 │   │                 │    │
│   └─────────────────┘   └─────────────────┘    │
│                                                  │
│                                                  │
│   최근 등록 상품                                 │
│   ┌────┐  ┌────┐  ┌────┐  ┌────┐  ┌────┐     │
│   │    │  │    │  │    │  │    │  │    │     │
│   │img │  │img │  │img │  │img │  │img │     │
│   └────┘  └────┘  └────┘  └────┘  └────┘     │
│                                                  │
└──────────────────────────────────────────────────┘
```

**UI 요소**:
- 헤더: 로고 + 사용자 프로필 (작은 아바타)
- 카드 버튼: 200x200px, 그림자 효과, 호버 시 확대
- 아이콘: 48px, 컬러풀
- 최근 상품: 가로 스크롤, 100x100px 썸네일

**인터랙션**:
- "새 상품 등록" → 카테고리 선택 화면
- "내 상품 관리" → 상품 목록 화면
- "판매 통계" → 통계 화면
- "설정" → 설정 화면
- 최근 상품 클릭 → 상품 상세

---

#### 화면 4: 카테고리 선택

**목적**: 상품 카테고리 빠른 선택

**레이아웃**:
```
┌──────────────────────────────────────────────────┐
│  ← 뒤로              상품 등록 (1/4)              │
├──────────────────────────────────────────────────┤
│                                                  │
│        어떤 종류의 상품을 등록하시나요?           │
│                                                  │
│                                                  │
│   ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐      │
│   │  👔  │  │  📱  │  │  💻  │  │  🎮  │      │
│   │ 의류  │  │ 전자  │  │ 디지털│  │ 취미  │      │
│   │패션   │  │기기   │  │가전   │  │게임   │      │
│   └──────┘  └──────┘  └──────┘  └──────┘      │
│                                                  │
│   ┌──────┐  ┌──────┐  ┌──────┐  ┌──────┐      │
│   │  📚  │  │  🏡  │  │  🎨  │  │  ✨  │      │
│   │ 도서  │  │ 가구  │  │ 예술  │  │ 기타  │      │
│   │문구   │  │인테리어│  │공예   │  │      │      │
│   └──────┘  └──────┘  └──────┘  └──────┘      │
│                                                  │
│                                                  │
│                                                  │
│   💡 카테고리는 나중에 변경할 수 있어요          │
│                                                  │
└──────────────────────────────────────────────────┘
```

**카테고리 목록**:
```yaml
categories:
  - id: fashion
    name: 의류/패션
    icon: 👔
    subcategories: [남성의류, 여성의류, 신발, 가방, 액세서리]

  - id: electronics
    name: 전자기기
    icon: 📱
    subcategories: [스마트폰, 태블릿, 노트북, 데스크탑, 주변기기]

  - id: appliances
    name: 디지털/가전
    icon: 💻
    subcategories: [생활가전, 주방가전, 계절가전, 카메라]

  - id: hobby
    name: 취미/게임
    icon: 🎮
    subcategories: [게임기, 게임타이틀, 완구, 수집품]

  - id: books
    name: 도서/문구
    icon: 📚
    subcategories: [도서, 만화, 잡지, 문구]

  - id: furniture
    name: 가구/인테리어
    icon: 🏡
    subcategories: [가구, 침구, 조명, 인테리어소품]

  - id: art
    name: 예술/공예
    icon: 🎨
    subcategories: [그림, 조각, 수공예, 악기]

  - id: other
    name: 기타
    icon: ✨
    subcategories: [스포츠, 뷰티, 식품, 기타]
```

**인터랙션**:
- 카테고리 선택 → 서브카테고리 바텀시트 표시
- 서브카테고리 선택 → 상품 정보 입력 화면
- 진행 바: 25% 완료

---

#### 화면 5: 상품 정보 입력

**목적**: 상품 상세 정보 수집

**레이아웃**:
```
┌──────────────────────────────────────────────────┐
│  ← 뒤로              상품 등록 (2/4)              │
├──────────────────────────────────────────────────┤
│                                                  │
│  선택: 전자기기 > 스마트폰               [변경]  │
│                                                  │
│  ┌────────────────────────────────────────────┐│
│  │ 상품명 *                                   ││
│  │ 예: 아이폰 13 Pro 128GB 그래파이트        ││
│  └────────────────────────────────────────────┘│
│                                                  │
│  ┌──────────────────┐  ┌──────────────────┐   │
│  │ 판매 가격 *      │  │ 원래 가격        │   │
│  │ 800,000 원       │  │ 1,350,000 원     │   │
│  └──────────────────┘  └──────────────────┘   │
│                                                  │
│  상품 상태 *                                     │
│  ┌────┐ ┌────┐ ┌────┐ ┌────┐ ┌────┐          │
│  │ 새  │ │중상│ │상  │ │중  │ │하  │          │
│  │제품│ │급  │ │급  │ │급  │ │급  │          │
│  └────┘ └────┘ └────┘ └────┘ └────┘          │
│    (선택됨)                                      │
│                                                  │
│  ┌────────────────────────────────────────────┐│
│  │ 상품 설명                                  ││
│  │                                            ││
│  │ 상품의 상태, 구매 시기, 사용 기간 등을     ││
│  │ 자세히 적어주세요. (선택사항)              ││
│  │                                            ││
│  │                                            ││
│  └────────────────────────────────────────────┘│
│                                                  │
│  거래 방법                                       │
│  ☑️ 직거래  ☑️ 택배 거래                        │
│                                                  │
│  거래 지역 (직거래 시)                           │
│  ┌────────────────────────────────────────────┐│
│  │ 서울시 강남구                               ││
│  └────────────────────────────────────────────┘│
│                                                  │
│          ┌──────────────────────┐              │
│          │    다음: 사진 추가    │              │
│          └──────────────────────┘              │
│                                                  │
└──────────────────────────────────────────────────┘
```

**입력 필드 상세**:

| 필드 | 타입 | 필수 | 검증 규칙 | 플레이스홀더 |
|------|------|------|-----------|-------------|
| 상품명 | Text | ✅ | 5~100자 | "예: 아이폰 13 Pro..." |
| 판매가격 | Number | ✅ | 1,000원 이상 | "800,000" |
| 원래가격 | Number | ❌ | 판매가격 이상 | "1,350,000" |
| 상품상태 | Radio | ✅ | 5개 옵션 | - |
| 상품설명 | Textarea | ❌ | 최대 1,000자 | "상품의 상태, 구매 시기..." |
| 거래방법 | Checkbox | ✅ | 1개 이상 | - |
| 거래지역 | Text | 조건부 | 직거래 시 필수 | "서울시 강남구" |

**상품 상태 정의**:
- 새제품: 미개봉 또는 전혀 사용하지 않은 상태
- 중상급: 사용감이 거의 없는 상태
- 상급: 약간의 사용감이 있으나 깨끗한 상태
- 중급: 사용감이 있으나 기능은 정상
- 하급: 눈에 띄는 사용감이나 결함이 있음

**검증 로직**:
```typescript
interface ProductFormData {
  category_id: string;
  subcategory_id: string;
  title: string;
  price: number;
  original_price?: number;
  condition: 'new' | 'like_new' | 'good' | 'fair' | 'poor';
  description?: string;
  trade_methods: ('direct' | 'delivery')[];
  trade_location?: string;
}

function validateForm(data: ProductFormData): boolean {
  // 상품명: 5~100자
  if (data.title.length < 5 || data.title.length > 100) {
    return false;
  }

  // 가격: 1,000원 이상
  if (data.price < 1000) {
    return false;
  }

  // 원래 가격이 있으면 판매가격보다 높아야 함
  if (data.original_price && data.original_price < data.price) {
    return false;
  }

  // 거래 방법 1개 이상
  if (data.trade_methods.length === 0) {
    return false;
  }

  // 직거래 선택 시 지역 필수
  if (data.trade_methods.includes('direct') && !data.trade_location) {
    return false;
  }

  return true;
}
```

**인터랙션**:
- 가격 입력 시 자동 천단위 콤마
- 상품 상태 선택 시 시각적 피드백
- "다음" 버튼: 검증 통과 후 활성화
- 진행 바: 50% 완료

---

#### 화면 6: 사진 촬영/업로드

**목적**: 상품 이미지 수집 (최대 10장)

**레이아웃**:
```
┌──────────────────────────────────────────────────┐
│  ← 뒤로              상품 등록 (3/4)              │
├──────────────────────────────────────────────────┤
│                                                  │
│            상품 사진을 추가해주세요               │
│         첫 번째 사진이 대표 사진이 됩니다         │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │  사진 미리보기 영역                         │ │
│  │                                             │ │
│  │  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐          │ │
│  │  │ 1 │ │ 2 │ │ 3 │ │ + │ │   │   (1/10) │ │
│  │  │img│ │img│ │img│ │   │ │   │          │ │
│  │  └─X─┘ └─X─┘ └─X─┘ └───┘ └───┘          │ │
│  │   대표    ↑      ↓   촬영                 │ │
│  │                                             │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ┌────────────────┐  ┌────────────────┐        │
│  │   📷 카메라    │  │   🖼️ 갤러리   │        │
│  │     촬영       │  │    선택        │        │
│  └────────────────┘  └────────────────┘        │
│                                                  │
│  💡 촬영 팁:                                     │
│  • 밝은 곳에서 촬영해주세요                      │
│  • 여러 각도에서 찍어주세요                      │
│  • 상품의 상태가 잘 보이도록 해주세요            │
│  • 실물과 다른 사진은 신고 대상이 될 수 있어요   │
│                                                  │
│  [건너뛰기]         ┌──────────────────────┐    │
│                     │    다음: 정보 확인    │    │
│                     └──────────────────────┘    │
│                                                  │
└──────────────────────────────────────────────────┘
```

**이미지 처리 로직**:
```typescript
interface ImageUploadConfig {
  maxImages: 10;
  maxFileSize: 10 * 1024 * 1024; // 10MB
  acceptedFormats: ['image/jpeg', 'image/png', 'image/webp'];
  compressionQuality: 0.8;
  maxDimension: 2048; // px
}

async function processImage(file: File): Promise<ProcessedImage> {
  // 1. 파일 형식 검증
  if (!config.acceptedFormats.includes(file.type)) {
    throw new Error('지원하지 않는 파일 형식입니다.');
  }

  // 2. 파일 크기 검증
  if (file.size > config.maxFileSize) {
    throw new Error('파일 크기는 10MB를 초과할 수 없습니다.');
  }

  // 3. 이미지 압축 및 리사이징
  const compressed = await compressImage(file, {
    quality: config.compressionQuality,
    maxDimension: config.maxDimension,
  });

  // 4. Supabase Storage 업로드
  const fileName = `${uuid()}.webp`;
  const { data, error } = await supabase.storage
    .from('product-images')
    .upload(fileName, compressed);

  if (error) throw error;

  // 5. 공개 URL 반환
  const publicUrl = supabase.storage
    .from('product-images')
    .getPublicUrl(fileName);

  return {
    fileName,
    url: publicUrl.data.publicUrl,
    size: compressed.size,
    width: compressed.width,
    height: compressed.height,
  };
}
```

**인터랙션**:
- "카메라 촬영" → 디바이스 카메라 실행
- "갤러리 선택" → 파일 선택기 (다중 선택 가능)
- 썸네일 클릭 → 전체 화면 미리보기
- X 버튼 → 이미지 삭제
- 드래그 앤 드롭 → 순서 변경 (대표 사진 변경)
- "건너뛰기" → 사진 없이 진행 (경고 메시지)
- 진행 바: 75% 완료

---

#### 화면 7: 정보 확인 및 등록

**목적**: 최종 확인 및 상품 등록

**레이아웃**:
```
┌──────────────────────────────────────────────────┐
│  ← 뒤로              상품 등록 (4/4)              │
├──────────────────────────────────────────────────┤
│                                                  │
│            입력하신 정보를 확인해주세요           │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │  사진 (5장)                         [수정] │ │
│  │  ┌───┐ ┌───┐ ┌───┐ ┌───┐ ┌───┐          │ │
│  │  │img│ │img│ │img│ │img│ │img│          │ │
│  │  └───┘ └───┘ └───┘ └───┘ └───┘          │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │  카테고리                           [수정] │ │
│  │  전자기기 > 스마트폰                       │ │
│  │────────────────────────────────────────────│ │
│  │  상품명                             [수정] │ │
│  │  아이폰 13 Pro 128GB 그래파이트             │ │
│  │────────────────────────────────────────────│ │
│  │  가격                               [수정] │ │
│  │  800,000원 (정가 1,350,000원)              │ │
│  │────────────────────────────────────────────│ │
│  │  상품 상태                          [수정] │ │
│  │  중상급 (사용감이 거의 없음)                │ │
│  │────────────────────────────────────────────│ │
│  │  거래 방법                          [수정] │ │
│  │  직거래, 택배 거래                         │ │
│  │  거래 지역: 서울시 강남구                  │ │
│  │────────────────────────────────────────────│ │
│  │  상품 설명                          [수정] │ │
│  │  2023년 9월 구매했으며, 보호필름과...      │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ☑️ 상품 정보가 정확함을 확인했습니다            │
│  ☑️ 판매 금지 품목이 아님을 확인했습니다         │
│                                                  │
│          ┌──────────────────────┐              │
│          │  🎯 상품 등록하기     │              │
│          └──────────────────────┘              │
│                                                  │
└──────────────────────────────────────────────────┘
```

**등록 처리 로직**:
```typescript
async function submitProduct(data: ProductFormData, images: string[]): Promise<void> {
  try {
    // 1. 로딩 상태 표시
    showLoading('상품을 등록하는 중...');

    // 2. Supabase에 상품 정보 저장
    const { data: product, error } = await supabase
      .from('products')
      .insert({
        seller_id: currentUser.id,
        category_id: data.category_id,
        subcategory_id: data.subcategory_id,
        title: data.title,
        price: data.price,
        original_price: data.original_price,
        condition: data.condition,
        description: data.description,
        trade_methods: data.trade_methods,
        trade_location: data.trade_location,
        images: images,
        status: 'active',
        created_at: new Date().toISOString(),
      })
      .select()
      .single();

    if (error) throw error;

    // 3. QR 코드 생성
    const qrCode = await generateQRCode(product.id);

    // 4. 성공 화면으로 이동
    navigateToSuccessScreen(product, qrCode);

  } catch (error) {
    console.error('상품 등록 실패:', error);
    showError('상품 등록에 실패했습니다. 다시 시도해주세요.');
  } finally {
    hideLoading();
  }
}
```

**인터랙션**:
- 각 섹션의 [수정] 버튼 → 해당 단계로 이동
- 체크박스 → 모두 체크 필수
- "상품 등록하기" 버튼 → 등록 처리 및 QR 생성
- 진행 바: 100% 완료

---

#### 화면 8: 등록 완료 & QR 코드

**목적**: 등록 성공 확인 및 QR 코드 제공

**레이아웃**:
```
┌──────────────────────────────────────────────────┐
│                                        [X] 닫기  │
│                                                  │
│              ✅ 등록이 완료되었습니다!            │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │         상품 정보                          │ │
│  │  ┌────┐                                    │ │
│  │  │img │  아이폰 13 Pro 128GB                │ │
│  │  └────┘  800,000원                         │ │
│  │          ID: PRD-20231030-A1B2C3            │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│            이 QR 코드를 상품에 부착하세요         │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │                                             │ │
│  │          ┌─────────────┐                   │ │
│  │          │             │                   │ │
│  │          │  QR  CODE   │                   │ │
│  │          │             │                   │ │
│  │          │  [QR이미지] │                   │ │
│  │          │             │                   │ │
│  │          └─────────────┘                   │ │
│  │                                             │ │
│  │        에버세컨즈 - PRD-20231030-A1B2C3     │ │
│  │                                             │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ┌──────────────┐  ┌──────────────┐            │
│  │ 📄 QR 출력   │  │ 📱 내 폰으로 │            │
│  │              │  │    전송      │            │
│  └──────────────┘  └──────────────┘            │
│                                                  │
│  개인 웹몰 주소:                                 │
│  https://everseconds.com/shop/홍길동             │
│                                                  │
│  ┌──────────────────┐  ┌──────────────────┐    │
│  │  🌐 웹몰 방문     │  │  ✅ 완료         │    │
│  └──────────────────┘  └──────────────────┘    │
│                                                  │
└──────────────────────────────────────────────────┘
```

**QR 코드 생성 로직**:
```typescript
interface QRCodeData {
  productId: string;
  sellerId: string;
  url: string;
  timestamp: string;
}

async function generateQRCode(productId: string): Promise<string> {
  const qrData: QRCodeData = {
    productId: productId,
    sellerId: currentUser.id,
    url: `https://everseconds.com/product/${productId}`,
    timestamp: new Date().toISOString(),
  };

  // QR 코드 생성 (qr_flutter 패키지 사용)
  const qrCode = await QRCodeGenerator.generate(
    data: JSON.stringify(qrData),
    size: 512,
    errorCorrectionLevel: QRErrorCorrectLevel.H, // 높은 오류 정정
    foregroundColor: '#000000',
    backgroundColor: '#FFFFFF',
  );

  // Supabase Storage에 저장
  const fileName = `qr_${productId}.png`;
  await supabase.storage
    .from('qr-codes')
    .upload(fileName, qrCode);

  return fileName;
}
```

**인터랙션**:
- "QR 출력" → 프린터로 출력 (키오스크에 연결된 프린터)
- "내 폰으로 전송" → 카카오톡 메시지로 QR 이미지 전송
- "웹몰 방문" → 판매자 개인 웹몰 페이지로 이동
- "완료" → 메인 대시보드로 이동

**출력 형식**:
```
┌─────────────────────┐
│  에버세컨즈 🎯       │
│─────────────────────│
│                     │
│   [QR CODE 이미지]  │
│                     │
│─────────────────────│
│ 아이폰 13 Pro 128GB │
│ 800,000원           │
│                     │
│ 판매자: 홍길동       │
│ 등록일: 2023.10.30  │
│                     │
│ ID: PRD-A1B2C3      │
└─────────────────────┘
```

---

#### 화면 9: 내 상품 목록

**목적**: 등록한 상품 관리

**레이아웃**:
```
┌──────────────────────────────────────────────────┐
│  ← 뒤로           내 상품 (12개)         🔍 검색  │
├──────────────────────────────────────────────────┤
│  [전체] [판매중] [예약중] [거래완료] [숨김]       │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │ ┌────┐                                     │ │
│  │ │img │  아이폰 13 Pro 128GB          🟢    │ │
│  │ │    │  800,000원                         │ │
│  │ └────┘  조회 124회 · 10시간 전             │ │
│  │         [수정] [QR보기] [숨기기]           │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │ ┌────┐                                     │ │
│  │ │img │  갤럭시 버즈 프로               🟡    │ │
│  │ │    │  120,000원                         │ │
│  │ └────┘  조회 58회 · 1일 전                 │ │
│  │         [수정] [QR보기] [거래완료]         │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│  ┌────────────────────────────────────────────┐ │
│  │ ┌────┐                                     │ │
│  │ │img │  맥북 프로 M1                  ✅    │ │
│  │ │    │  2,100,000원 (거래완료)             │ │
│  │ └────┘  조회 342회 · 5일 전                │ │
│  │         [재등록] [삭제]                     │ │
│  └────────────────────────────────────────────┘ │
│                                                  │
│                    ...                           │
│                                                  │
└──────────────────────────────────────────────────┘
```

**상태 표시**:
- 🟢 판매중 (active)
- 🟡 예약중 (reserved)
- ✅ 거래완료 (sold)
- ⚫ 숨김 (hidden)

**상품 관리 기능**:

| 액션 | 상태 | 설명 |
|------|------|------|
| 수정 | 판매중, 예약중 | 상품 정보 수정 |
| QR보기 | 판매중, 예약중 | QR 코드 재출력 |
| 숨기기 | 판매중 | 목록에서 일시적으로 숨김 |
| 거래완료 | 판매중, 예약중 | 판매 완료 처리 |
| 재등록 | 거래완료, 숨김 | 다시 판매중으로 변경 |
| 삭제 | 모두 | 영구 삭제 (복구 불가) |

**인터랙션**:
- 상품 클릭 → 상품 상세 화면
- 필터 탭 → 상태별 필터링
- 검색 → 상품명으로 검색
- 액션 버튼 → 해당 기능 실행
- 하단 도달 시 → 무한 스크롤로 추가 로드

---

#### 화면 10: 상품 수정

**목적**: 등록된 상품 정보 수정

**레이아웃**:
- 기본적으로 "화면 5: 상품 정보 입력"과 동일
- 기존 데이터가 미리 채워진 상태
- 헤더: "상품 수정" 타이틀

**수정 제한 사항**:
- 카테고리는 변경 불가 (새로 등록 권장)
- 이미지는 추가/삭제/순서 변경 가능
- 가격은 무제한 수정 가능
- 상태 변경 가능

**저장 처리**:
```typescript
async function updateProduct(productId: string, updates: Partial<ProductFormData>): Promise<void> {
  try {
    showLoading('상품을 수정하는 중...');

    const { error } = await supabase
      .from('products')
      .update({
        ...updates,
        updated_at: new Date().toISOString(),
      })
      .eq('id', productId);

    if (error) throw error;

    showSuccess('상품이 수정되었습니다.');
    navigateToProductList();

  } catch (error) {
    console.error('상품 수정 실패:', error);
    showError('상품 수정에 실패했습니다.');
  } finally {
    hideLoading();
  }
}
```

---

## 🎨 디자인 가이드라인

### 4.1 색상 시스템

```yaml
Primary Colors:
  primary-500: '#2563eb'  # 메인 블루
  primary-600: '#1d4ed8'  # 호버 블루

Success Colors:
  success-500: '#10b981'  # 성공 그린

Warning Colors:
  warning-500: '#f59e0b'  # 경고 앰버

Error Colors:
  error-500: '#ef4444'   # 에러 레드

Neutral Colors:
  gray-50: '#f9fafb'     # 배경
  gray-100: '#f3f4f6'    # 카드 배경
  gray-500: '#6b7280'    # 보조 텍스트
  gray-900: '#111827'    # 주요 텍스트
```

### 4.2 타이포그래피

```yaml
Font Family:
  primary: 'Pretendard Variable'
  fallback: '-apple-system, sans-serif'

Font Sizes:
  display: 32px / 2rem      # 대제목
  h1: 24px / 1.5rem         # 제목 1
  h2: 20px / 1.25rem        # 제목 2
  h3: 18px / 1.125rem       # 제목 3
  body: 16px / 1rem         # 본문
  small: 14px / 0.875rem    # 작은 텍스트
  caption: 12px / 0.75rem   # 캡션

Font Weights:
  bold: 700       # 강조
  semibold: 600   # 중간 강조
  medium: 500     # 약간 강조
  regular: 400    # 일반
```

### 4.3 간격 시스템

```yaml
Spacing Scale:
  xs: 4px
  sm: 8px
  md: 16px
  lg: 24px
  xl: 32px
  2xl: 48px
  3xl: 64px

Common Uses:
  card-padding: 24px (lg)
  button-padding: 16px 32px (md, xl)
  input-padding: 12px 16px
  section-gap: 32px (xl)
```

### 4.4 터치 타겟

```yaml
Minimum Touch Target: 44px × 44px (iOS HIG)
Recommended: 48px × 48px (Material Design)

Button Heights:
  small: 40px
  medium: 48px
  large: 56px

Icon Sizes:
  small: 20px
  medium: 24px
  large: 32px
  xlarge: 48px
```

---

## ⚡ 성능 최적화

### 5.1 이미지 최적화

```typescript
const imageOptimization = {
  // 업로드 시 압축
  compression: {
    quality: 0.8,
    format: 'webp',
    maxDimension: 2048,
  },

  // 썸네일 생성
  thumbnails: {
    small: 200,   // 목록용
    medium: 600,  // 상세 미리보기용
    large: 1200,  // 전체화면용
  },

  // 레이지 로딩
  lazyLoading: true,

  // 캐싱
  cachePolicy: 'max-age=31536000', // 1년
};
```

### 5.2 데이터 로딩 전략

```typescript
// 페이지네이션
const ITEMS_PER_PAGE = 20;

// 무한 스크롤
async function loadMoreProducts(page: number) {
  const { data, error } = await supabase
    .from('products')
    .select('*')
    .eq('seller_id', currentUser.id)
    .order('created_at', { ascending: false })
    .range(page * ITEMS_PER_PAGE, (page + 1) * ITEMS_PER_PAGE - 1);

  return data;
}

// 프리페칭
function prefetchNextPage() {
  // 사용자가 스크롤하기 전에 미리 다음 페이지 로드
}
```

### 5.3 오프라인 지원

```typescript
// 로컬 스토리지에 임시 저장
async function saveDraft(formData: ProductFormData) {
  await LocalStorage.set('product_draft', JSON.stringify(formData));
}

// 네트워크 복구 시 자동 업로드
async function syncPendingUploads() {
  const drafts = await LocalStorage.get('pending_uploads');
  if (drafts) {
    for (const draft of drafts) {
      await submitProduct(draft);
    }
  }
}
```

---

## 🔒 보안 및 권한

### 6.1 인증

```typescript
// Kakao OAuth 인증
async function loginWithKakao() {
  try {
    const result = await KakaoAuth.login({
      scopes: ['profile_nickname', 'profile_image'],
    });

    // Supabase 세션 생성
    const { data, error } = await supabase.auth.signInWithOAuth({
      provider: 'kakao',
      options: {
        redirectTo: 'everseconds://auth/callback',
      },
    });

    if (error) throw error;

    // 사용자 프로필 저장
    await saveUserProfile(result.profile);

    navigateToDashboard();

  } catch (error) {
    console.error('로그인 실패:', error);
    showError('로그인에 실패했습니다.');
  }
}
```

### 6.2 데이터 검증

```typescript
// 클라이언트 측 검증
function validateProductData(data: ProductFormData): ValidationResult {
  const errors: string[] = [];

  // 상품명 검증
  if (!data.title || data.title.length < 5) {
    errors.push('상품명은 5자 이상 입력해주세요.');
  }

  // 가격 검증
  if (!data.price || data.price < 1000) {
    errors.push('가격은 1,000원 이상 입력해주세요.');
  }

  // 금지어 필터링
  const bannedWords = ['총', '마약', '도박'];
  if (bannedWords.some(word => data.title.includes(word))) {
    errors.push('금지된 단어가 포함되어 있습니다.');
  }

  return {
    isValid: errors.length === 0,
    errors,
  };
}
```

### 6.3 Row Level Security (RLS)

```sql
-- products 테이블 RLS 정책
CREATE POLICY "Users can view all active products"
ON products FOR SELECT
TO authenticated
USING (status = 'active');

CREATE POLICY "Users can insert their own products"
ON products FOR INSERT
TO authenticated
WITH CHECK (auth.uid() = seller_id);

CREATE POLICY "Users can update their own products"
ON products FOR UPDATE
TO authenticated
USING (auth.uid() = seller_id);

CREATE POLICY "Users can delete their own products"
ON products FOR DELETE
TO authenticated
USING (auth.uid() = seller_id);
```

---

## 🧪 테스트 시나리오

### 7.1 기능 테스트

| 테스트 케이스 | 입력 | 예상 결과 |
|-------------|------|----------|
| 로그인 성공 | 유효한 카카오 계정 | 대시보드 진입 |
| 상품 등록 성공 | 유효한 상품 정보 | QR 코드 생성 |
| 이미지 업로드 | 10장 이미지 | 모두 업로드 성공 |
| 가격 입력 | "1000000" | "1,000,000원" 표시 |
| 필수 항목 누락 | 제목 미입력 | 에러 메시지 표시 |

### 7.2 성능 테스트

| 지표 | 목표 | 측정 방법 |
|------|------|----------|
| 앱 시작 시간 | < 2초 | 스플래시 → 대시보드 |
| 화면 전환 | < 300ms | 애니메이션 완료 |
| 이미지 업로드 | < 5초/장 | 10MB 이미지 기준 |
| QR 생성 | < 1초 | 상품 등록 완료 |

---

## 📱 디바이스 호환성

### 8.1 지원 디바이스

```yaml
태블릿:
  - iPad (9.7", 10.2", 10.9", 11", 12.9")
  - 안드로이드 태블릿 (10" 이상)

최소 사양:
  - RAM: 2GB 이상
  - 저장공간: 100MB 이상
  - 카메라: 8MP 이상 (권장)
  - OS: iOS 13+ / Android 8+
```

### 8.2 화면 방향

- **가로 모드 (Landscape)**: 권장 및 최적화
- **세로 모드 (Portrait)**: 지원하되 가로 전환 유도

---

## 🚀 배포 및 업데이트

### 9.1 배포 전략

```yaml
개발 환경:
  - Flutter DevTools
  - Hot Reload
  - 로컬 Supabase

스테이징:
  - Firebase App Distribution
  - 베타 테스터 10명
  - 테스트 데이터베이스

프로덕션:
  - App Store (iOS)
  - Google Play (Android)
  - 또는 사이드로드 (.apk / .ipa)
```

### 9.2 업데이트 정책

- **긴급 업데이트**: 보안 이슈, 크리티컬 버그
- **정기 업데이트**: 월 1회 (기능 추가, 개선)
- **자동 업데이트**: 앱 시작 시 체크 및 알림

---

## 📊 분석 및 모니터링

### 10.1 추적 이벤트

```typescript
const trackingEvents = {
  // 사용자 행동
  login_success: { user_id, timestamp },
  logout: { user_id, session_duration },

  // 상품 관련
  product_register_start: { user_id },
  product_register_complete: { user_id, product_id, category },
  product_register_cancel: { user_id, step },

  // 이미지 관련
  image_upload_start: { image_count },
  image_upload_complete: { image_count, total_size },
  image_upload_fail: { error_code },

  // QR 코드
  qr_generate: { product_id },
  qr_print: { product_id },
  qr_send_to_phone: { product_id },
};
```

### 10.2 에러 추적

```typescript
// Firebase Crashlytics
async function logError(error: Error, context: any) {
  await Crashlytics.recordError(error, {
    userId: currentUser?.id,
    screen: context.screen,
    action: context.action,
    timestamp: new Date().toISOString(),
  });
}
```

---

## 🔧 기술 구현 세부사항

### 11.1 Flutter 프로젝트 구조

```
resale_marketplace_app/
├── lib/
│   ├── main.dart
│   ├── screens/
│   │   ├── auth/
│   │   │   ├── welcome_screen.dart
│   │   │   ├── login_screen.dart
│   │   │   └── kakao_auth.dart
│   │   ├── kiosk/
│   │   │   ├── dashboard_screen.dart
│   │   │   ├── category_selection_screen.dart
│   │   │   ├── product_form_screen.dart
│   │   │   ├── image_upload_screen.dart
│   │   │   ├── confirmation_screen.dart
│   │   │   └── success_screen.dart
│   │   ├── products/
│   │   │   ├── product_list_screen.dart
│   │   │   ├── product_detail_screen.dart
│   │   │   └── product_edit_screen.dart
│   │   └── settings/
│   │       └── settings_screen.dart
│   ├── widgets/
│   │   ├── kiosk_button.dart
│   │   ├── category_card.dart
│   │   ├── image_picker_widget.dart
│   │   ├── qr_code_widget.dart
│   │   └── product_card.dart
│   ├── services/
│   │   ├── supabase_service.dart
│   │   ├── auth_service.dart
│   │   ├── product_service.dart
│   │   ├── image_service.dart
│   │   └── qr_service.dart
│   ├── models/
│   │   ├── user.dart
│   │   ├── product.dart
│   │   ├── category.dart
│   │   └── qr_code.dart
│   ├── utils/
│   │   ├── validators.dart
│   │   ├── formatters.dart
│   │   └── constants.dart
│   └── theme/
│       ├── colors.dart
│       ├── typography.dart
│       └── theme.dart
├── assets/
│   ├── images/
│   ├── icons/
│   └── fonts/
└── pubspec.yaml
```

### 11.2 주요 패키지

```yaml
dependencies:
  flutter: ^3.16.0

  # Backend
  supabase_flutter: ^2.0.0

  # Authentication
  kakao_flutter_sdk: ^1.9.0
  kakao_flutter_sdk_user: ^1.9.0

  # QR Code
  qr_flutter: ^4.1.0
  qr_code_scanner: ^1.0.1

  # Images
  image_picker: ^1.0.5
  image_cropper: ^5.0.0
  cached_network_image: ^3.3.0
  flutter_image_compress: ^2.1.0

  # UI
  flutter_svg: ^2.0.9
  shimmer: ^3.0.0
  loading_animation_widget: ^1.2.0

  # Utils
  intl: ^0.18.1
  uuid: ^4.2.1

  # State Management
  provider: ^6.1.1

  # Error Tracking
  firebase_crashlytics: ^3.4.6

dev_dependencies:
  flutter_test:
  flutter_lints: ^3.0.0
```

### 11.3 Supabase 설정

```typescript
// Supabase 초기화
import 'package:supabase_flutter/supabase_flutter.dart';

Future<void> initSupabase() async {
  await Supabase.initialize(
    url: 'https://your-project.supabase.co',
    anonKey: 'your-anon-key',
    authOptions: const FlutterAuthClientOptions(
      authFlowType: AuthFlowType.pkce,
    ),
    realtimeClientOptions: const RealtimeClientOptions(
      logLevel: RealtimeLogLevel.info,
    ),
    storageOptions: const StorageClientOptions(
      retryAttempts: 3,
    ),
  );
}

// Supabase 클라이언트 접근
final supabase = Supabase.instance.client;
```

---

## 🎓 사용자 가이드

### 12.1 판매자 온보딩

**첫 방문 시 튜토리얼**:
1. 환영 화면 및 서비스 소개 (30초)
2. 카카오 로그인 안내 (10초)
3. 상품 등록 프로세스 미리보기 (1분)
4. QR 코드 사용법 (30초)

**도움말 버튼**:
- 각 화면 우측 상단에 "?" 아이콘
- 터치 시 해당 화면 사용법 팝업

### 12.2 FAQ

**Q: 사진을 반드시 찍어야 하나요?**
A: 사진은 선택사항이지만, 사진이 있는 상품이 거래 확률이 3배 높습니다.

**Q: QR 코드를 분실했어요.**
A: "내 상품 목록"에서 언제든지 재출력할 수 있습니다.

**Q: 등록한 상품을 수정할 수 있나요?**
A: 네, 언제든지 수정 및 삭제가 가능합니다.

**Q: 개인 웹몰은 어떻게 접속하나요?**
A: 등록 완료 화면에서 제공되는 URL로 접속하거나, 프로필 화면에서 "내 웹몰 보기"를 선택하세요.

---

## 📞 지원 및 문의

### 13.1 기술 지원

```yaml
이메일: dev@everseconds.com
카카오톡 채널: @everseconds
운영시간: 평일 09:00 ~ 18:00
```

### 13.2 버그 리포트

- 앱 내 "설정 > 문제 신고" 메뉴
- GitHub Issues: https://github.com/everseconds/app/issues

---

**문서 버전**: 1.0
**최종 수정일**: 2025-10-30
**작성자**: 에버세컨즈 개발팀
**관련 문서**: [프로젝트 개요](./프로젝트_개요.md)
